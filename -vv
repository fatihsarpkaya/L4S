<p>::: {.cell .markdown}### Configure Experiment:::::: {.cell
.code}<code>python# installing the kernelpkg_list = ['iproute2_5.10.0-1_amd64.deb',            'iproute2-doc_5.10.0-1_all.deb',            'linux-headers-5.15.72-43822a283-prague-43_1_amd64.deb',            'linux-image-5.15.72-43822a283-prague-43_1_amd64.deb',            'linux-libc-dev_1_amd64.deb']for node in slice.get_nodes():    for pkg in pkg_list:        node.upload_file("/home/fabric/work/setup/" + pkg, "/home/ubuntu/" + pkg)   node.execute("sudo dpkg -i " + " ".join(pkg_list) + "; sudo reboot")# wait for all nodes to come back upslice.wait_ssh(progress=True)for node in slice.get_nodes(): # check kernel version  node.execute("hostname; uname -a")  #inital configuration for the sendersslice.get_node(name="tx0").execute("sudo modprobe tcp_prague")slice.get_node(name="tx0).execute("sudo sysctl -w net.ipv4.tcp_congestion_control=prague")slice.get_node(name="tx0").execute("sudo sysctl -w net.ipv4.tcp_ecn=3")slice.get_node(name="tx1).execute("sudo sysctl -w net.ipv4.tcp_congestion_control=cubic")slice.get_node(name="tx1").execute("sudo sysctl -w net.ipv4.tcp_ecn=1")</code>:::</p>
<p>{ “cells”: [ { “cell_type”: “markdown”, “metadata”: {}, “source”: [
“::: {.cell .markdown}### Define configuration for this
experiment::::::”, “{.cell”,
“.code}<code>pythonslice_name=\"l4s-\" + fablib.get_bastion_username()node_conf = [ {'name': \"tx0\",    'cores': 4, 'ram': 32, 'disk': 20, 'image': 'default_ubuntu_22', 'packages': ['iperf3', 'net-tools', 'moreutils']},  {'name': \"tx1\",    'cores': 4, 'ram': 32, 'disk': 20, 'image': 'default_ubuntu_22', 'packages': ['iperf3', 'net-tools', 'moreutils']},  {'name': \"router\", 'cores': 4, 'ram': 32, 'disk': 20, 'image': 'default_ubuntu_22', 'packages': ['iperf3', 'net-tools', 'moreutils']},  {'name': \"delay\", 'cores': 4, 'ram': 32, 'disk': 20, 'image': 'default_ubuntu_22', 'packages': ['iperf3', 'net-tools', 'moreutils']},  {'name': \"rx0\",    'cores': 4, 'ram': 32, 'disk': 20, 'image': 'default_ubuntu_22', 'packages': [''iperf3', 'net-tools', 'moreutils']},  {'name': \"rx1\",    'cores': 4, 'ram': 32, 'disk': 20, 'image': 'default_ubuntu_22', 'packages': ['iperf3', 'net-tools', 'moreutils']}]net_conf = [ {\"name\": \"net-tx0\", \"subnet\": \"10.0.0.0/24\", \"nodes\": [{\"name\": \"tx0\",   \"addr\": \"10.0.0.100\"}, {\"name\": \"delay\", \"addr\": \"10.0.0.101\"}]}, {\"name\": \"net-tx1\", \"subnet\": \"10.0.1.0/24\", \"nodes\": [{\"name\": \"tx1\", \"addr\": \"10.0.1.100\"}, {\"name\": \"delay\", \"addr\": \"10.0.1.101\"}]}, {\"name\": \"net-delay-router\", \"subnet\": \"10.0.2.0/24\", \"nodes\": [{\"name\": \"delay\",   \"addr\": \"10.0.2.1\"}, {\"name\": \"router\", \"addr\": \"10.0.2.2\"}]}, {\"name\": \"net-rx0\", \"subnet\": \"10.0.3.0/24\", \"nodes\": [{\"name\": \"rx0\",   \"addr\": \"10.0.3.100\"}, {\"name\": \"router\", \"addr\": \"10.0.3.101\"}]} {\"name\": \"net-rx1\", \"subnet\": \"10.0.4.0/24\", \"nodes\": [{\"name\": \"rx1\", \"addr\": \"10.0.4.100\"}, {\"name\": \"router\", \"addr\": \"10.0.4.101\"}]}]route_conf = [ {\"addr\": \"10.0.3.0/24\", \"gw\": \"10.0.0.101\", \"nodes\": [\"tx0]},  {\"addr\": \"10.0.4.0/24\", \"gw\": \"10.0.1.101\", \"nodes\": [\"tx1]},  {\"addr\": \"10.0.3.0/24\", \"gw\": \"10.0.2.2\", \"nodes\": [\"delay\"]}, {\"addr\": \"10.0.4.0/24\", \"gw\": \"10.0.2.2\", \"nodes\": [\"delay\"]}, {\"addr\": \"10.0.0.0/24\", \"gw\": \"10.0.3.101\", \"nodes\": [\"rx0\"]}, {\"addr\": \"10.0.1.0/24\", \"gw\": \"10.0.4.101\", \"nodes\": [\"rx1\"]}, {\"addr\": \"10.0.0.0/24\", \"gw\": \"10.0.2.1\", \"nodes\": [\"router\"]}, {\"addr\": \"10.0.1.0/24\", \"gw\": \"10.0.2.1\", \"nodes\": [\"router\"]},]exp_conf = {'cores': sum([ n['cores'] for n in node_conf]), 'nic': sum([len(n['nodes']) for n in net_conf]) }</code>:::”
], “id”: “0c689d4a-fdf1-4791-83f2-34f4f21ab9b3” } ], “nbformat”: 4,
“nbformat_minor”: 5, “metadata”: {} }</p>
