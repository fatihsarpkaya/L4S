::: {.cell .markdown}### Execute Experiment:::::: {.cell .code}```python# nodes and instancestx0_node = slice.get_node(name="tx0")tx1_node = slice.get_node(name="tx1")rx0_node = slice.get_node(name="rx0")rx1_node = slice.get_node(name="rx1")delay_node = slice.get_node(name="delay")router_node = slice.get_node(name="router")tx0_egress_iface  = tx0_node.get_interface(network_name = "net-tx")tx1_egress_iface  = tx1_node.get_interface(network_name = "net-tx")delay_ingress_tx0_iface  = delay_node.get_interface(network_name = "net-tx")delay_ingress_tx1_iface  = delay_node.get_interface(network_name = "net-tx")delay_egress_iface  = delay_node.get_interface(network_name = "net-mid")delay_ingress_tx0_name = delay_ingress_tx0_iface.get_device_name()delay_ingress_tx1_name = delay_ingress_tx1_iface.get_device_name()delay_egress_name = delay_egress_iface.get_device_name()router_ingress_iface  = router_node.get_interface(network_name = "net-mid")router_egress_iface  = router_node.get_interface(network_name = "net-tx")rx0_ingress_iface  = rx0_node.get_interface(network_name = "net-tx")rx1_ingress_iface  = rx1_node.get_interface(network_name = "net-tx")```:::::: {.cell .code}```python# generate full factorial experimentimport itertools#btl_limit    = int(1000*n_bdp*btl_capacity*2*base_owd/8) # limit of the bottleneck, n_bdp x BDP in bytes #packet_number=int(btl_limit/1500)+1exp_factors = {     'n_bdp': [0.5, 2, 5, 10], # n x bandwidth delay product    'btl_capacity': [100, 1000],    'base_rtt': [10, 20, 50, 100, 200],    'aqm': ['FIFO', 'single queue FQ', 'Codel', 'FQ', 'FQ_Codel', 'DualPI2'],    'ecn_threshold': [5, 20],    'ecn_fallback': ['off', 'on'],    'rx0_ecn': ['no ecn', 'ecn', 'accecn']    'rx1_ecn': ['no ecn', 'ecn', 'accecn']}factor_names = [k for k in exp_factors]factor_lists = list(itertools.product(*exp_factors.values()))exp_lists = []for factor_l in factor_lists:    temp_dict = dict(zip(factor_names, factor_l))    if temp_dict['aqm'] == 'FIFO':        del temp_dict['ecn_threshold']    exp_lists.append(temp_dict)data_dir = slice_name + 'singlebottleneck'```:::::: {.cell .code}```python# delay at emulatorem = [    {"name": "delay", "if": "switch_1-client_A-switch_1_switch_1-p1"},    {"name": "delay", "if": "switch_1-client_B-switch_1_switch_1-p1"},    {"name": "delay", "if": "switch_1-switch_1-router_switch_1-p1"},]for e in em:    os_if_name = slice.get_interface(name=e['if']).get_os_interface()    cmds = "sudo tc qdisc replace dev {iface} root netem delay {owd}ms limit 60000".format(iface=os_if_name, owd=base_owd)    slice.get_node(name=e["name"]).execute(cmds)```:::::: {.cell .code}```python# run experimentsfor exp in exp_lists:    # check if we already ran this experiment    # (allow stop/resume)    file_out = data_dir + "/%d_%d_%d_%s_%d_%s_%s_%s.txt" % (exp['n_bdp'], exp['btl_capacity'], exp['base_rtt'], exp['aqm'], exp['ecn_threshold'], exp['ecn_fallback'], exp['rx0_ecn'], exp['rx1_ecn'])    stdout, stderr = tx_node.execute("ls " + file_out, quiet=True) # run this on the node that saves the output file    if len(stdout):        print("Already have " + file_out + ", skipping")    elif len(stderr):        print("Running experiment to generate " + file_out)         # delay at emulator        em = ['delay_ingress_tx0_name', 'delay_ingress_tx1_name', 'delay_egress_name']        for e in em:            cmds = "sudo tc qdisc replace dev {iface} root netem delay {owd}ms limit 60000".format(iface=e, owd=exp['base_rtt'])            slice.get_node(name=e["name"]).execute(cmds)        ``````:::